From 85d4a509da704e9a423de1044644030b8b0f3b2e Mon Sep 17 00:00:00 2001
From: Ming Liu <ming.liu@toradex.com>
Date: Thu, 24 Dec 2020 12:45:31 +0100
Subject: [PATCH] CMakeLists.txt: fix libzip name

Change libzip -> zlib, this is needed for building with OE.

Upstream-Status: Inappropriate [oe specific]

Signed-off-by: Ming Liu <ming.liu@toradex.com>
---
 libuuu/CMakeLists.txt | 2 +-
 uuu/CMakeLists.txt    | 5 ++---
 2 files changed, 3 insertions(+), 4 deletions(-)

diff --git a/libuuu/CMakeLists.txt b/libuuu/CMakeLists.txt
index 1f68418..482b22d 100644
--- a/libuuu/CMakeLists.txt
+++ b/libuuu/CMakeLists.txt
@@ -7,7 +7,7 @@ set(CMAKE_SKIP_RPATH ON)
 find_package(BZip2 REQUIRED)
 find_package(PkgConfig REQUIRED)
 pkg_check_modules(LIBUSB REQUIRED libusb-1.0>=1.0.16)
-pkg_check_modules(LIBZIP REQUIRED libzip)
+pkg_check_modules(LIBZIP REQUIRED zlib)
 find_package(Threads)
 
 if (STATIC)
diff --git a/uuu/CMakeLists.txt b/uuu/CMakeLists.txt
index 22880f5..ea6eb8b 100644
--- a/uuu/CMakeLists.txt
+++ b/uuu/CMakeLists.txt
@@ -6,7 +6,6 @@ set(CMAKE_SKIP_RPATH ON)
 
 find_package(PkgConfig REQUIRED)
 pkg_check_modules(LIBUSB REQUIRED libusb-1.0>=1.0.16)
-pkg_check_modules(LIBZIP REQUIRED libzip)
 pkg_check_modules(LIBZ REQUIRED zlib)
 find_package(Threads)
 
@@ -34,7 +33,7 @@ set(LSTS
 	nand_burn_loader.lst
 )
 
-link_directories(${CMAKE_CURRENT_SOURCE_DIR}/libuuu ${LIBUSB_LIBRARY_DIRS} ${LIBZIP_LIBRARY_DIRS} ${LIBZ_LIBRARY_DIRS})
+link_directories(${CMAKE_CURRENT_SOURCE_DIR}/libuuu ${LIBUSB_LIBRARY_DIRS} ${LIBZ_LIBRARY_DIRS})
 
 set(CLIST_EXECUTABLE ${CMAKE_CURRENT_SOURCE_DIR}/gen_txt_include.sh)
 set(generated_files_dir "${CMAKE_BINARY_DIR}/uuu/gen")
@@ -70,7 +69,7 @@ set(SOURCES
 )
 
 add_executable(uuu ${SOURCES})
-target_link_libraries(uuu uuc_s ${OPENSSL_LIBRARIES} ${LIBUSB_LIBRARIES} ${LIBZIP_LIBRARIES} ${LIBZ_LIBRARIES} dl bz2)
+target_link_libraries(uuu uuc_s ${OPENSSL_LIBRARIES} ${LIBUSB_LIBRARIES} ${LIBZ_LIBRARIES} dl bz2)
 
 install(TARGETS uuu DESTINATION bin)
 add_compile_definitions(TARGET_PATH="${CMAKE_INSTALL_PREFIX}/bin/uuu")
-- 
2.29.0

