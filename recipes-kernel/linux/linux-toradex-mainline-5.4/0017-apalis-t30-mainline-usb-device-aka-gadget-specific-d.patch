From 311d58337ab637fddc35a174763cb10187e5f009 Mon Sep 17 00:00:00 2001
Message-Id: <311d58337ab637fddc35a174763cb10187e5f009.1588111715.git.marcel.ziswiler@toradex.com>
In-Reply-To: <e468d4ece1c2f170254466333c90efcbb368da5d.1588111715.git.marcel.ziswiler@toradex.com>
References: <e468d4ece1c2f170254466333c90efcbb368da5d.1588111715.git.marcel.ziswiler@toradex.com>
From: Marcel Ziswiler <marcel.ziswiler@toradex.com>
Date: Fri, 20 Apr 2018 10:04:33 +0200
Subject: [PATCH 17/17] apalis-t30-mainline: usb device aka gadget specific
 device tree

USB device aka gadget specific device trees for the Toradex Easy
Installer.

Signed-off-by: Marcel Ziswiler <marcel.ziswiler@toradex.com>
---
 arch/arm/boot/dts/tegra30-apalis-eval.dts      | 3 ++-
 arch/arm/boot/dts/tegra30-apalis-v1.1-eval.dts | 3 ++-
 2 files changed, 4 insertions(+), 2 deletions(-)

diff --git a/arch/arm/boot/dts/tegra30-apalis-eval.dts b/arch/arm/boot/dts/tegra30-apalis-eval.dts
index 625d9f4d52057..1fcbaf0149aea 100644
--- a/arch/arm/boot/dts/tegra30-apalis-eval.dts
+++ b/arch/arm/boot/dts/tegra30-apalis-eval.dts
@@ -148,8 +148,9 @@
 
 	/* EHCI instance 0: USB1_DP/N -> USBO1_DP/N */
 	usb@7d000000 {
+		compatible = "nvidia,tegra30-udc";
 		status = "okay";
-		dr_mode = "otg";
+		dr_mode = "peripheral";
 	};
 
 	usb-phy@7d000000 {
diff --git a/arch/arm/boot/dts/tegra30-apalis-v1.1-eval.dts b/arch/arm/boot/dts/tegra30-apalis-v1.1-eval.dts
index 255a6388392af..b96b351d31575 100644
--- a/arch/arm/boot/dts/tegra30-apalis-v1.1-eval.dts
+++ b/arch/arm/boot/dts/tegra30-apalis-v1.1-eval.dts
@@ -149,8 +149,9 @@
 
 	/* EHCI instance 0: USB1_DP/N -> USBO1_DP/N */
 	usb@7d000000 {
+		compatible = "nvidia,tegra30-udc";
 		status = "okay";
-		dr_mode = "otg";
+		dr_mode = "peripheral";
 	};
 
 	usb-phy@7d000000 {
-- 
2.25.4

