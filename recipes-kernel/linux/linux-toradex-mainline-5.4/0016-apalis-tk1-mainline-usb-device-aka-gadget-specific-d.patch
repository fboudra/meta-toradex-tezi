From e93a677ad4181a417ff04b7740945d34cdb427f6 Mon Sep 17 00:00:00 2001
Message-Id: <e93a677ad4181a417ff04b7740945d34cdb427f6.1588111715.git.marcel.ziswiler@toradex.com>
In-Reply-To: <e468d4ece1c2f170254466333c90efcbb368da5d.1588111715.git.marcel.ziswiler@toradex.com>
References: <e468d4ece1c2f170254466333c90efcbb368da5d.1588111715.git.marcel.ziswiler@toradex.com>
From: Marcel Ziswiler <marcel.ziswiler@toradex.com>
Date: Tue, 27 Mar 2018 14:34:28 +0200
Subject: [PATCH 16/17] apalis-tk1-mainline: usb device aka gadget specific
 device tree

USB device aka gadget specific device trees for the Toradex Easy
Installer.

Signed-off-by: Marcel Ziswiler <marcel.ziswiler@toradex.com>
---
 arch/arm/boot/dts/tegra124-apalis-eval.dts      | 3 ++-
 arch/arm/boot/dts/tegra124-apalis-v1.2-eval.dts | 3 ++-
 arch/arm/boot/dts/tegra124-apalis-v1.2.dtsi     | 2 +-
 arch/arm/boot/dts/tegra124-apalis.dtsi          | 2 +-
 4 files changed, 6 insertions(+), 4 deletions(-)

diff --git a/arch/arm/boot/dts/tegra124-apalis-eval.dts b/arch/arm/boot/dts/tegra124-apalis-eval.dts
index 3f4ab911cb496..c0864181d4001 100644
--- a/arch/arm/boot/dts/tegra124-apalis-eval.dts
+++ b/arch/arm/boot/dts/tegra124-apalis-eval.dts
@@ -158,8 +158,9 @@
 
 	/* EHCI instance 0: USB1_DP/N -> USBO1_DP/N */
 	usb@7d000000 {
+		compatible = "nvidia,tegra124-udc";
 		status = "okay";
-		dr_mode = "otg";
+		dr_mode = "peripheral";
 	};
 
 	usb-phy@7d000000 {
diff --git a/arch/arm/boot/dts/tegra124-apalis-v1.2-eval.dts b/arch/arm/boot/dts/tegra124-apalis-v1.2-eval.dts
index e81b10b788a6b..b930acff3c544 100644
--- a/arch/arm/boot/dts/tegra124-apalis-v1.2-eval.dts
+++ b/arch/arm/boot/dts/tegra124-apalis-v1.2-eval.dts
@@ -160,8 +160,9 @@
 
 	/* EHCI instance 0: USB1_DP/N -> USBO1_DP/N */
 	usb@7d000000 {
+		compatible = "nvidia,tegra124-udc";
 		status = "okay";
-		dr_mode = "otg";
+		dr_mode = "peripheral";
 	};
 
 	usb-phy@7d000000 {
diff --git a/arch/arm/boot/dts/tegra124-apalis-v1.2.dtsi b/arch/arm/boot/dts/tegra124-apalis-v1.2.dtsi
index 9f773fb0f4770..4ea16a88c8c02 100644
--- a/arch/arm/boot/dts/tegra124-apalis-v1.2.dtsi
+++ b/arch/arm/boot/dts/tegra124-apalis-v1.2.dtsi
@@ -1846,7 +1846,7 @@
 				lanes {
 					usb2-0 {
 						status = "okay";
-						nvidia,function = "xusb";
+						nvidia,function = "snps";
 					};
 
 					usb2-1 {
diff --git a/arch/arm/boot/dts/tegra124-apalis.dtsi b/arch/arm/boot/dts/tegra124-apalis.dtsi
index adb66ad691a60..d0364ec800ea6 100644
--- a/arch/arm/boot/dts/tegra124-apalis.dtsi
+++ b/arch/arm/boot/dts/tegra124-apalis.dtsi
@@ -1811,7 +1811,7 @@
 				lanes {
 					usb2-0 {
 						status = "okay";
-						nvidia,function = "xusb";
+						nvidia,function = "snps";
 					};
 
 					usb2-1 {
-- 
2.25.4

