From a6758ffd309aab603bb9946e2798ef248037f79f Mon Sep 17 00:00:00 2001
Message-Id: <a6758ffd309aab603bb9946e2798ef248037f79f.1588111715.git.marcel.ziswiler@toradex.com>
In-Reply-To: <e468d4ece1c2f170254466333c90efcbb368da5d.1588111715.git.marcel.ziswiler@toradex.com>
References: <e468d4ece1c2f170254466333c90efcbb368da5d.1588111715.git.marcel.ziswiler@toradex.com>
From: Marcel Ziswiler <marcel.ziswiler@toradex.com>
Date: Mon, 16 Dec 2019 08:07:38 +0100
Subject: [PATCH 06/17] arm: dts: imx7d-colibri-emmc: force fixed ids for usdhc
 controllers

The following, together with kernel patches, forces a fixed assignment
between device id and sdmmc controller.

I.e. the eMMC on uSDHC3 will be /dev/mmcblk0.

Signed-off-by: Marcel Ziswiler <marcel.ziswiler@toradex.com>
---
 arch/arm/boot/dts/imx7d-colibri-emmc.dtsi | 11 +++++++++++
 1 file changed, 11 insertions(+)

diff --git a/arch/arm/boot/dts/imx7d-colibri-emmc.dtsi b/arch/arm/boot/dts/imx7d-colibri-emmc.dtsi
index af39e5370fa12..fe3f555c2b8c5 100644
--- a/arch/arm/boot/dts/imx7d-colibri-emmc.dtsi
+++ b/arch/arm/boot/dts/imx7d-colibri-emmc.dtsi
@@ -11,6 +11,17 @@
 		device_type = "memory";
 		reg = <0x80000000 0x40000000>;
 	};
+
+	aliases {
+		/*
+		* The following, together with kernel patches, forces a fixed
+		* assignment between device id and SDMMC controllers.
+		*
+		* I.e. the eMMC on uSDHC3 will be /dev/mmcblk0.
+		*/
+		mmc0 = &usdhc3; /* eMMC */
+		mmc1 = &usdhc1; /* MMC/SD slot */
+	};
 };
 
 &gpio6 {
-- 
2.25.4

