From 4fd9eee9ba74c799ab0b0c0f0507e2ffba7f00d5 Mon Sep 17 00:00:00 2001
Message-Id: <4fd9eee9ba74c799ab0b0c0f0507e2ffba7f00d5.1588111715.git.marcel.ziswiler@toradex.com>
In-Reply-To: <e468d4ece1c2f170254466333c90efcbb368da5d.1588111715.git.marcel.ziswiler@toradex.com>
References: <e468d4ece1c2f170254466333c90efcbb368da5d.1588111715.git.marcel.ziswiler@toradex.com>
From: Gerard Salvatella <gerard.salvatella@toradex.com>
Date: Fri, 23 Nov 2018 16:37:20 +0100
Subject: [PATCH 13/17] ARM: dts: imx7-colibri: use static MTD partition layout

Use static MTD partition layout so that we are not dependent
on U-Boot providing proper MTD partition information.

Signed-off-by: Gerard Salvatella <gerard.salvatella@toradex.com>
---
 arch/arm/boot/dts/imx7-colibri.dtsi | 23 +++++++++++++++++++++++
 1 file changed, 23 insertions(+)

diff --git a/arch/arm/boot/dts/imx7-colibri.dtsi b/arch/arm/boot/dts/imx7-colibri.dtsi
index f00015a66153a..96db774981b4a 100644
--- a/arch/arm/boot/dts/imx7-colibri.dtsi
+++ b/arch/arm/boot/dts/imx7-colibri.dtsi
@@ -322,11 +322,34 @@
 };
 
 &gpmi {
+	#address-cells = <1>;
+	#size-cells = <1>;
 	pinctrl-names = "default";
 	pinctrl-0 = <&pinctrl_gpmi_nand>;
 	fsl,use-minimum-ecc;
 	nand-on-flash-bbt;
 	nand-ecc-mode = "hw";
+
+	partition@0 {
+               label = "mx7-bcb";
+               reg = <0x00000000 0x00080000>;
+	};
+	partition@80000 {
+	       label = "u-boot1";
+	       reg = <0x00080000 0x00180000>;
+	};
+	partition@200000 {
+	       label = "u-boot2";
+	       reg = <0x00200000 0x00180000>;
+	};
+	partition@380000 {
+	       label = "u-boot-env";
+	       reg = <0x00380000 0x00080000>;
+	};
+	partition@400000 {
+	       label = "ubi";
+	       reg = <0x00400000 0x1fc00000>;
+	};
 };
 
 &i2c1 {
-- 
2.25.4

